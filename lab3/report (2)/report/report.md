---
## Front matter
title: "Отчёт по лабораторной работе №2"
subtitle: "Управление пользователями и группами"
author: "Руслан Алиев"

## Generic otions
lang: ru-RU
toc-title: "Содержание"

## Bibliography
bibliography: bib/cite.bib
csl: pandoc/csl/gost-r-7-0-5-2008-numeric.csl

## Pdf output format
toc: true
toc-depth: 2
lof: true
lot: true
fontsize: 12pt
linestretch: 1.5
papersize: a4
documentclass: scrreprt
## I18n polyglossia
polyglossia-lang:
  name: russian
  options:
    - spelling=modern
    - babelshorthands=true
polyglossia-otherlangs:
  name: english
## I18n babel
babel-lang: russian
babel-otherlangs: english
## Fonts
mainfont: IBM Plex Serif
romanfont: IBM Plex Serif
sansfont: IBM Plex Sans
monofont: IBM Plex Mono
mathfont: STIX Two Math
mainfontoptions: Ligatures=Common,Ligatures=TeX,Scale=0.94
romanfontoptions: Ligatures=Common,Ligatures=TeX,Scale=0.94
sansfontoptions: Ligatures=Common,Ligatures=TeX,Scale=MatchLowercase,Scale=0.94
monofontoptions: Scale=MatchLowercase,Scale=0.94,FakeStretch=0.9
mathfontoptions:
## Biblatex
biblatex: true
biblio-style: "gost-numeric"
biblatexoptions:
  - parentracker=true
  - backend=biber
  - hyperref=auto
  - language=auto
  - autolang=other*
  - citestyle=gost-numeric
## Pandoc-crossref LaTeX customization
figureTitle: "Рис."
tableTitle: "Таблица"
listingTitle: "Листинг"
lofTitle: "Список иллюстраций"
lotTitle: "Список таблиц"
lolTitle: "Листинги"
## Misc options
indent: true
header-includes:
  - \usepackage{indentfirst}
  - \usepackage{float}
  - \floatplacement{figure}{H}
---

# Цель работы

Получить представление о работе с учётными записями пользователей и группами пользователей в операционной системе типа Linux.

# Выполнение

## Переключение учётных записей пользователей

1. Работа была начата под обычной учётной записью пользователя.  
   Для определения текущего пользователя была использована команда **whoami**, после чего для получения расширенной информации применялась команда **id**.

   В результате отображены следующие данные:  
   - `uid` — уникальный идентификатор пользователя в системе  
   - `gid` — идентификатор основной группы пользователя  
   - `groups` — список всех групп, в которые входит пользователь  
   - `context` — контекст безопасности SELinux  

   ![Определение текущего пользователя и его идентификаторов](Screenshot_1.png){ #fig:001 width=80% }

2. Для получения прав суперпользователя была использована команда **su**.  
   После ввода пароля пользователя root повторно выполнена команда **id**.

   Вывод команды показывает, что пользователь root имеет идентификаторы `uid=0` и `gid=0`, что означает наличие полных административных прав в системе. Также отсутствуют ограничения по группам, а контекст SELinux указывает на неограниченный режим.

   ![Переключение на пользователя root](Screenshot_1.png){ #fig:002 width=80% }

3. Возврат к исходной учётной записи был выполнен с помощью команды **exit**.

## Работа с файлом /etc/sudoers

4. Для просмотра и редактирования файла `/etc/sudoers` использовалась команда **sudo -i visudo**.

   Использование утилиты **visudo** является обязательным, так как она:  
   - проверяет синтаксис файла перед сохранением  
   - предотвращает сохранение некорректных изменений  
   - защищает систему от потери доступа к sudo  

   ![Просмотр файла /etc/sudoers](Screenshot_2.png){ #fig:003 width=80% }

5. В файле `/etc/sudoers` присутствует строка `%wheel ALL=(ALL) ALL`.

   Данная запись означает, что все пользователи, входящие в группу **wheel**, имеют право выполнять любые команды от имени любого пользователя с использованием механизма sudo. Группа **wheel** применяется для разграничения административных привилегий.

## Создание пользователей alice и bob

6. Был создан пользователь **alice**, включённый в группу **wheel**.  
   Проверка принадлежности к группе выполнена с помощью команды **id alice**.

   ![Создание пользователя alice и проверка групп](Screenshot_3.png){ #fig:004 width=80% }

7. Для пользователя **alice** был установлен пароль стандартным способом.

8. Выполнено переключение на учётную запись пользователя **alice**.

9. Под пользователем **alice** был создан пользователь **bob**, после чего ему также был назначен пароль.  
   Проверка существования пользователя выполнена командой **id bob**.

   ![Создание пользователя bob](Screenshot_4.png){ #fig:005 width=80% }

## Настройка параметров создания пользователей

10. Под учётной записью root был открыт файл конфигурации `/etc/login.defs`.

    В файле были изменены параметры:  
    - `CREATE_HOME` установлен в значение `yes`, что обеспечивает автоматическое создание домашнего каталога пользователя  
    - `USERGROUPS_ENAB` установлен в значение `no`, что запрещает создание персональной группы с именем пользователя и позволяет использовать общую группу `users`  

    ![Редактирование файла /etc/login.defs](Screenshot_5.png){ #fig:006 width=80% }

11. В каталоге `/etc/skel` были созданы каталоги **Pictures** и **Documents**, которые автоматически копируются в домашние каталоги новых пользователей.

12. В файл `.bashrc`, находящийся в каталоге `/etc/skel`, была добавлена переменная окружения `EDITOR`, указывающая редактор по умолчанию.

    ![Изменение файла .bashrc](Screenshot_6.png){ #fig:007 width=80% }

## Создание и анализ пользователя carol

13. Под пользователем **alice** был создан пользователь **carol**, после чего ему был назначен пароль.

14. После переключения на пользователя **carol** были проверены его идентификаторы и содержимое домашнего каталога.

    Установлено, что:  
    - основной группой пользователя является `users`  
    - каталоги **Pictures** и **Documents** были созданы автоматически  

    ![Домашний каталог пользователя carol](Screenshot_7.png){ #fig:008 width=80% }

15. В файле `/etc/shadow` была просмотрена строка, относящаяся к пользователю **carol**.

    Данная строка содержит зашифрованный пароль, дату последнего изменения пароля, а также параметры, определяющие срок его действия.

16. Были изменены параметры пароля пользователя **carol**: минимальный срок действия, срок действия пароля и период предупреждения об истечении срока.

    ![Изменение параметров пароля пользователя carol](Screenshot_8.png){ #fig:009 width=80% }

17. Повторная проверка файла `/etc/shadow` подтвердила применение новых параметров.

18. Выполнена проверка наличия записей о пользователях **alice** и **carol** в файлах `/etc/passwd`, `/etc/shadow` и `/etc/group`.

## Работа с группами

19. Под учётной записью пользователя **alice** были созданы группы **main** и **third**.

20. Пользователи **alice** и **bob** были добавлены в группу **main**, а пользователь **carol** — в группу **third**.

21. С помощью команды **id** подтверждено, что пользователь **carol** имеет основную группу `users` и вторичную группу `third`.  
    Также определены группы, в которые входят остальные созданные пользователи.

    ![Проверка групп пользователей](Screenshot_9.png){ #fig:010 width=80% }

# Контрольные вопросы

1. Информацию об идентификаторе пользователя и группах, в которые он включён, можно получить с помощью команд **whoami** и **id**.  
   Команда **whoami** выводит имя текущего пользователя, а команда **id** отображает UID пользователя, его основной GID и список всех групп, в которые он входит.

2. Пользователь **root** имеет идентификатор **UID = 0**.  
   Узнать UID пользователя можно с помощью команды **id**. Например, при выполнении команды **id root** в выводе будет указано `uid=0`, что подтверждает принадлежность пользователя к суперпользователям.

3. Команда **su** используется для полного переключения на другую учётную запись и запуска новой оболочки от имени другого пользователя.  
   Команда **sudo** позволяет выполнять отдельные команды с повышенными привилегиями, не переключаясь полностью на другую учётную запись. При этом используются собственные учётные данные пользователя.

4. Параметры работы утилиты sudo определяются в конфигурационном файле `/etc/sudoers`, а также в дополнительных файлах, подключаемых из каталога `/etc/sudoers.d`.

5. Для безопасного изменения конфигурации sudo следует использовать команду **visudo**.  
   Она выполняет проверку синтаксиса перед сохранением файла и предотвращает повреждение конфигурации, которое может привести к потере доступа к sudo.

6. Для предоставления пользователю доступа ко всем административным командам через sudo он должен быть членом группы **wheel**.  
   Это обеспечивается строкой `%wheel ALL=(ALL) ALL` в файле `/etc/sudoers`.

7. Параметры, используемые при создании учётных записей пользователей, определяются в файле `/etc/login.defs` и каталоге `/etc/skel`.  
   В файле `/etc/login.defs` задаются, например, параметры автоматического создания домашнего каталога и политики групп, а каталог `/etc/skel` содержит файлы и каталоги, которые копируются в домашний каталог нового пользователя.

8. Информация о первичной и дополнительных группах пользователей хранится в файлах `/etc/passwd` и `/etc/group`.  
   В файле `/etc/passwd` для пользователя **alice** указывается его UID, основной GID и домашний каталог.  
   В файле `/etc/group` перечислены группы, в которых пользователь **alice** указан как член вторичной группы, например группы **wheel** или **main**.

9. Для изменения информации о пароле пользователя, включая срок его действия, используются команды **passwd** с дополнительными параметрами.  
   С их помощью можно задать минимальный и максимальный срок действия пароля, а также период предупреждения пользователя об истечении срока действия.

10. Для прямого изменения информации в файле `/etc/group` следует использовать команду **vigr**.  
    Она обеспечивает безопасное редактирование файла групп, выполняет блокировку файла на время изменения и предотвращает возможные ошибки конфигурации.

# Заключение

В ходе лабораторной работы были изучены механизмы управления пользователями и группами в операционной системе Linux. Освоены приёмы переключения между учётными записями, предоставления административных прав с помощью sudo, создания и настройки пользователей, а также управления группами и параметрами паролей. Полученные навыки позволяют эффективно администрировать систему и контролировать доступ пользователей к ресурсам ОС.
