---
## Front matter
title: "Отчёт по лабораторной работе №14"
subtitle: "Партиции, файловые системы,монтирование"
author: "Руслан Алиев"

## Generic otions
lang: ru-RU
toc-title: "Содержание"

## Bibliography
bibliography: bib/cite.bib
csl: pandoc/csl/gost-r-7-0-5-2008-numeric.csl

## Pdf output format
toc: true
toc-depth: 2
lof: true
lot: true
fontsize: 12pt
linestretch: 1.5
papersize: a4
documentclass: scrreprt
## I18n polyglossia
polyglossia-lang:
  name: russian
  options:
    - spelling=modern
    - babelshorthands=true
polyglossia-otherlangs:
  name: english
## I18n babel
babel-lang: russian
babel-otherlangs: english
## Fonts
mainfont: IBM Plex Serif
romanfont: IBM Plex Serif
sansfont: IBM Plex Sans
monofont: IBM Plex Mono
mathfont: STIX Two Math
mainfontoptions: Ligatures=Common,Ligatures=TeX,Scale=0.94
romanfontoptions: Ligatures=Common,Ligatures=TeX,Scale=0.94
sansfontoptions: Ligatures=Common,Ligatures=TeX,Scale=MatchLowercase,Scale=0.94
monofontoptions: Scale=MatchLowercase,Scale=0.94,FakeStretch=0.9
mathfontoptions:
## Biblatex
biblatex: true
biblio-style: "gost-numeric"
biblatexoptions:
  - parentracker=true
  - backend=biber
  - hyperref=auto
  - language=auto
  - autolang=other*
  - citestyle=gost-numeric
## Pandoc-crossref LaTeX customization
figureTitle: "Рис."
tableTitle: "Таблица"
listingTitle: "Листинг"
lofTitle: "Список иллюстраций"
lotTitle: "Список таблиц"
lolTitle: "Листинги"
## Misc options
indent: true
header-includes:
  - \usepackage{indentfirst}
  - \usepackage{float}
  - \floatplacement{figure}{H}
---

# Цель работы

Получить навыки создания разделов на диске и файловых систем. Получить навыки монтирования файловых систем.

# Выполнение

## Создание разделов MBR с помощью fdisk

### Просмотр текущей разметки дисков

1. Выполнен переход в режим суперпользователя и вывод списка всех дисков с помощью `fdisk -l`.  
   В системе отображаются добавленные устройства `/dev/sdb` и `/dev/sdc` объёмом 1.5 GiB.

   ![Просмотр дисков с помощью fdisk -l](Screenshot_1.png){ #fig:001 width=80% }

### Создание основного раздела на /dev/sdb

2. Запущена утилита `fdisk /dev/sdb`. После входа просмотрена справка по командам с помощью `m`.

   ![Справка fdisk](Screenshot_2.png){ #fig:002 width=80% }

3. Текущая таблица разделов проверена командой `p` — диск не содержит разделов.

4. Создан основной раздел:
   - выбран тип `primary`;
   - принят номер раздела 1;
   - использован первый свободный сектор;
   - указан размер `+300M`.

   ![Создание основного раздела размером 300 MiB](Screenshot_3.png){ #fig:003 width=80% }

5. Изменения записаны командой `w`.

6. После записи проверена структура диска:

   ![Информация о новом разделе sdb1](Screenshot_4.png){ #fig:004 width=80% }

### Создание расширенного и логического разделов

7. Повторный запуск `fdisk /dev/sdb` для создания расширенного раздела.

8. Создан расширенный раздел:
   - команда создания нового раздела `n`;
   - выбран тип `extended`;
   - номер раздела установлен в 2;
   - первый и последний сектора выбраны по умолчанию (размер ~1.2 GiB).

9. Создан логический раздел внутри расширенного тома:
   - вновь использована команда `n`;
   - номер логического раздела выбран по умолчанию — 5;
   - первый сектор принят по умолчанию;
   - выбран размер `+300M`.

   ![Создание расширенного и логического раздела](Screenshot_5.png){ #fig:005 width=80% }

10. Изменения записаны (`w`), структура разделов обновлена через `partprobe`.

11. Проверка структуры разделов:

   ![Информация о расширенном и логическом разделе](Screenshot_6.png){ #fig:006 width=80% }

### Создание раздела подкачки

12. Снова открыт `fdisk /dev/sdb` для создания раздела подкачки.

13. Создан новый логический раздел:
   - команда `n`;
   - номер 6 выбран по умолчанию;
   - первый сектор принят по умолчанию;
   - указан размер `+300M`.

14. Тип раздела изменён:
   - выбрана команда `t`;
   - указан номер раздела 6;
   - введён код типа `82` (Linux swap).

   ![Создание раздела подкачки](Screenshot_7.png){ #fig:007 width=80% }

15. Изменения записаны (`w`), таблица обновлена через `partprobe`.

16. Проверка всех созданных разделов:

   ![Итоговая таблица разделов](Screenshot_8.png){ #fig:008 width=80% }

### Настройка и активация swap

17. Раздел подкачки отформатирован утилитой `mkswap`.

18. Активировано пространство подкачки командой `swapon`.

19. Информация о выделенной памяти и swap просмотрена через `free -m`.

## Создание разделов GPT с помощью gdisk

### Проверка текущей таблицы разделов на /dev/sdc

1. С помощью `gdisk -l /dev/sdc` была проверена структура диска и подтверждено отсутствие существующих таблиц разделов.

### Создание GPT-раздела

2. Запуск утилиты `gdisk /dev/sdc` привёл к автоматическому созданию новой GPT в памяти, поскольку старая структура отсутствовала.

3. Командой `n` создан новый раздел:
   - номер раздела принят по умолчанию (1);
   - первый сектор выбран по умолчанию;
   - размер раздела установлен как `+300M`.

4. Тип раздела оставлен по умолчанию — **8300 (Linux filesystem)**.

5. Раздел был записан на диск командой `w`, после подтверждения изменения.

   ![Создание GPT-раздела](Screenshot_9.png){ #fig:009 width=80% }

6. Проверка результата выполнена командами:

   - `cat /proc/partitions`
   - `gdisk -l /dev/sda`

   ![Информация о GPT-разделах](Screenshot_10.png){ #fig:010 width=80% }

## Форматирование файловых систем

### Создание файловой системы XFS на /dev/sdb1

1. На раздел /dev/sdb1 создана файловая система XFS.  
2. Установлена метка файловой системы xfsdisk.

### Создание файловой системы EXT4 на /dev/sdb5

1. На разделе /dev/sdb5 создана файловая система EXT4.  
2. Установлена метка ext4disk.  
3. Настроены параметры монтирования: включены ACL и расширенные атрибуты пользователя.

   ![Форматирование XFS и EXT4](Screenshot_11.png){ #fig:011 width=80% }

## Ручное монтирование файловых систем

### Монтирование EXT4

1. Создана точка монтирования /mnt/tmp.  
2. Раздел /dev/sdb5 был смонтирован в /mnt/tmp.  
3. Корректность монтирования проверена с помощью вывода всех активных точек.  
4. Раздел был отмонтирован и проверено его отсутствие в списке активных монтирований.

### Монтирование XFS в /mnt/data

1. Создан каталог /mnt/data.  
2. Получены данные UUID всех устройств с помощью blkid.

   ![Список UUID через blkid](Screenshot_12.png){ #fig:012 width=80% }

## Автоматическое монтирование через /etc/fstab

1. Извлечён UUID раздела /dev/sdb1.  
2. В файл /etc/fstab добавлена строка для автоматического монтирования раздела XFS в /mnt/data.  
3. Содержимое файла после редактирования отражает добавленный раздел.

   ![Редактирование fstab](Screenshot_13.png){ #fig:013 width=80% }

4. Проверено автоматическое монтирование с помощью системных инструментов.  
5. Вывод df -h подтвердил, что раздел /dev/sdb1 успешно примонтирован в /mnt/data.

   ![Проверка df -h](Screenshot_14.png){ #fig:014 width=80% }

## Самостоятельная работа

### Создание двух GPT-разделов по 100 MiB

1. На диске с GPT выполнено добавление двух новых разделов.  
   Оба раздела созданы размером по 100 MiB.  
   Один раздел получил тип Linux filesystem (8300), второй — тип Linux swap (8200).

   ![Создание двух разделов по 100 MiB](Screenshot_15.png){ #fig:015 width=80% }

2. После создания разделов их структура проверена с помощью вывода gdisk.  
   В таблице отображаются два новых раздела:

   - раздел под ext4;
   - раздел подкачки.

## Форматирование и настройка разделов

### Форматирование раздела под ext4

1. На разделе, предназначенном для файловой системы ext4, выполнено форматирование.  
2. Установлена метка ext4disk2.  
3. Включены параметры монтирования ACL и расширенные атрибуты пользователя.

### Настройка раздела подкачки

1. Второй созданный раздел был отформатирован как пространство подкачки.  
2. С помощью blkid получены UUID обоих разделов.

   ![Форматирование ext4 и создание swap](Screenshot_16.png){ #fig:016 width=80% }

## Настройка автоматического монтирования через /etc/fstab

1. Извлечены UUID обоих созданных разделов.  
2. В файл /etc/fstab добавлены записи:

   - раздел ext4 → /mnt/data-ext;
   - раздел swap → подключён как область подкачки.

3. Фрагмент изменённого файла fstab:

   ![Настройка автоматического монтирования](Screenshot_17.png){ #fig:017 width=80% }

## Проверка работы после перезагрузки

1. Проверено, что оба раздела успешно смонтированы:

   - ext4 в /mnt/data-ext;
   - xfs в /mnt/data.

2. Проверено, что пространство подкачки активно.  
3. Информация о смонтированных разделах и объёме swap:

   ![Проверка монтирования и swap](Screenshot_18.png){ #fig:018 width=80% }

# Контрольные вопросы

1. **Какой инструмент используется для создания разделов GUID?**  
   Утилита **gdisk**.

2. **Какой инструмент применяется для создания разделов MBR?**  
   Утилита **fdisk**.

3. **Какой файл используется для автоматического монтирования разделов во время загрузки?**  
   Файл **/etc/fstab**.

4. **Какой вариант монтирования целесообразно выбрать, если необходимо, чтобы файловая система не была автоматически примонтирована во время загрузки?**  
   Использовать опцию **noauto** в /etc/fstab.

5. **Какая команда позволяет форматировать раздел с типом 82 с соответствующей файловой системой?**  
   Форматирование раздела подкачки выполняется командой **mkswap**.

6. **Вы только что добавили несколько разделов для автоматического монтирования при загрузке. Как можно безопасно проверить, будет ли это работать без реальной перезагрузки?**  
   Использовать команду **mount -a**.

7. **Какая файловая система создаётся, если вы используете команду mkfs без какой-либо спецификации файловой системы?**  
   По умолчанию создаётся файловая система **ext2**.

8. **Как форматировать раздел EXT4?**  
   Использовать команду **mkfs.ext4 /dev/имя_раздела**.

9. **Как найти UUID для всех устройств на компьютере?**  
   Выполнить команду **blkid**.

# Заключение

В ходе выполнения работы были освоены основные методы управления дисковым пространством и файлами в операционных системах Linux.  
Были созданы и настроены разделы с использованием разметки **GPT** и **MBR**, изучены инструменты **gdisk** и **fdisk**, а также выполнено форматирование разделов в файловые системы **XFS** и **EXT4**.  
Особое внимание уделялось настройке автоматического монтирования через **/etc/fstab** и корректной активации пространства подкачки.  
Полученные навыки позволяют уверенно создавать, изменять и обслуживать дисковые разделы, обеспечивая стабильную работу системы и гибкое управление ресурсами.
