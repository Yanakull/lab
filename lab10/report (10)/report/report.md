---
## Front matter
title: "Отчёт по лабораторной работе №10"
subtitle: "Основы работы с модулями ядра операционной системы"
author: "Руслан Алиев"

## Generic otions
lang: ru-RU
toc-title: "Содержание"

## Bibliography
bibliography: bib/cite.bib
csl: pandoc/csl/gost-r-7-0-5-2008-numeric.csl

## Pdf output format
toc: true
toc-depth: 2
lof: true
lot: true
fontsize: 12pt
linestretch: 1.5
papersize: a4
documentclass: scrreprt
## I18n polyglossia
polyglossia-lang:
  name: russian
  options:
    - spelling=modern
    - babelshorthands=true
polyglossia-otherlangs:
  name: english
## I18n babel
babel-lang: russian
babel-otherlangs: english
## Fonts
mainfont: IBM Plex Serif
romanfont: IBM Plex Serif
sansfont: IBM Plex Sans
monofont: IBM Plex Mono
mathfont: STIX Two Math
mainfontoptions: Ligatures=Common,Ligatures=TeX,Scale=0.94
romanfontoptions: Ligatures=Common,Ligatures=TeX,Scale=0.94
sansfontoptions: Ligatures=Common,Ligatures=TeX,Scale=MatchLowercase,Scale=0.94
monofontoptions: Scale=MatchLowercase,Scale=0.94,FakeStretch=0.9
mathfontoptions:
## Biblatex
biblatex: true
biblio-style: "gost-numeric"
biblatexoptions:
  - parentracker=true
  - backend=biber
  - hyperref=auto
  - language=auto
  - autolang=other*
  - citestyle=gost-numeric
## Pandoc-crossref LaTeX customization
figureTitle: "Рис."
tableTitle: "Таблица"
listingTitle: "Листинг"
lofTitle: "Список иллюстраций"
lotTitle: "Список таблиц"
lolTitle: "Листинги"
## Misc options
indent: true
header-includes:
  - \usepackage{indentfirst}
  - \usepackage{float}
  - \floatplacement{figure}{H}
---

# Цель работы

Получить навыки работы с утилитами управления модулями ядра операционной системы.

# Выполнение

## Управление модулями ядра из командной строки

1. В начале работы был запущен терминал и получены права суперпользователя с помощью команды **su -**.  
   Далее для просмотра подключённых устройств и связанных с ними модулей ядра использовалась команда **lspci -k**.  
   Она отобразила список аппаратных компонентов, драйверов и модулей, отвечающих за их работу.  
   Например, сетевой адаптер использует модуль `e1000`, видеокарта — `vmwgfx`, а контроллеры хранения — `ata_piix` и `ahci`.  

   ![Список устройств и модулей ядра](Screenshot_1.png){ #fig:001 width=80% }

2. Для просмотра списка загруженных модулей использовалась команда **lsmod | sort**.  
   Команда выводит все активные модули ядра, отсортированные по имени.  
   Среди них можно увидеть, например, `ahci`, `e1000`, `vmwgfx`, `ata_piix` и другие.  

   ![Список загруженных модулей ядра](Screenshot_2.png){ #fig:002 width=80% }

3. Проверка загрузки модуля **ext4** выполнялась с помощью команды **lsmod | grep ext4**, после чего модуль был загружен:  
   **modprobe ext4**.  
   Повторная проверка показала его успешную активацию.  

   ![Загрузка модуля ext4](Screenshot_3.png){ #fig:003 width=80% }

4. Для получения информации о модуле использовалась команда **modinfo ext4**.  
   Отображены сведения о версии, лицензии, авторах, зависимостях и криптографической подписи.  
   Видно, что `ext4` — это модуль для работы с файловой системой Fourth Extended Filesystem, лицензирован под GPL и зависит от модулей `jbd2` и `mbcache`.  

5. При попытке выгрузить модуль с помощью **modprobe -r ext4** система успешно выполнила команду,  
   а при аналогичной операции с модулем **xfs** — отобразила ошибку *“Module xfs is in use”*,  
   что означает невозможность выгрузки модуля, так как он используется системой.  

   ![Выгрузка модулей ext4 и xfs](Screenshot_4.png){ #fig:004 width=80% }

## Загрузка модулей ядра с параметрами

1. Проверка наличия модуля **bluetooth** выполнялась командой **lsmod | grep bluetooth**.  
   Если модуль отсутствовал, он загружался командой **modprobe bluetooth**.  
   После загрузки повторная проверка подтвердила его наличие.  

   ![Загрузка модуля bluetooth](Screenshot_5.png){ #fig:005 width=80% }

2. Команда **modinfo bluetooth** вывела подробную информацию о модуле.  
   Из вывода следует, что модуль имеет параметры:  
   - `disable_esco` — отключает создание eSCO-соединений,  
   - `disable_ertm` — отключает улучшенный режим передачи,  
   - `enable_ecred` — включает расширенное управление потоком данных.  
   Таким образом, данные параметры позволяют настраивать работу Bluetooth-подсистемы.  

   ![Информация о модуле bluetooth](Screenshot_6.png){ #fig:006 width=80% }

3. Для выгрузки использовалась команда **modprobe -r bluetooth**, после чего модуль был успешно удалён из активных.  

## Обновление ядра системы

1. Для проверки текущей версии ядра применялась команда **uname -r**,  
   которая показала установленную версию ядра `6.12.0-55.12.1.el10_0.x86_64`.  

2. Затем была выполнена команда **dnf list kernel**, отобразившая список установленных и доступных версий пакета `kernel`.  

   ![Просмотр версии ядра и списка пакетов kernel](Screenshot_7.png){ #fig:007 width=80% }

3. Для обновления пакетов и ядра выполнялись команды:
   - **dnf upgrade --refresh** — обновление всех пакетов с проверкой актуальных метаданных;  
   - **dnf update kernel** — обновление пакета ядра;  
   - **dnf update** — обновление всей системы.  
   После завершения процесса обновления система была перезагружена, и новое ядро успешно установлено.  

   ![Обновление](Screenshot_8.png){ #fig:008 width=80% }

4. Проверка после перезагрузки с помощью **uname -r** и **hostnamectl** подтвердила,  
   что система работает на новой версии ядра `6.12.0-55.39.1.el10_0.x86_64` и использует дистрибутив **Rocky Linux 10.0 (Red Quartz)**.  

   ![Информация о системе и ядре после обновления](Screenshot_9.png){ #fig:009 width=80% }

# Контрольные вопросы

1. **Какая команда показывает текущую версию ядра, которая используется на вашей системе?**  
   uname -r  

2. **Как можно посмотреть более подробную информацию о текущей версии ядра операционной системы?**  
   hostnamectl  

3. **Какая команда показывает список загруженных модулей ядра?**  
   lsmod  

4. **Какая команда позволяет вам определять параметры модуля ядра?**  
   modinfo module_name  

5. **Как выгрузить модуль ядра?**  
   modprobe -r module_name  

6. **Что вы можете сделать, если получите сообщение об ошибке при попытке выгрузить модуль ядра?**  
   Убедиться, что модуль не используется другими процессами или системными службами.  
   При необходимости остановить соответствующие службы или размонтировать файловые системы, затем повторить команду **modprobe -r module_name**.  

7. **Как определить, какие параметры модуля ядра поддерживаются?**  
   modinfo module_name — в выводе команды указаны доступные параметры с описанием.  

8. **Как установить новую версию ядра?**  
   dnf update kernel  
   или  
   dnf upgrade --refresh  

# Заключение

В ходе работы были изучены основные приёмы управления модулями ядра операционной системы Linux из командной строки.  
Были рассмотрены команды для просмотра списка устройств, загруженных модулей и их параметров, а также способы загрузки и выгрузки модулей с использованием утилит **lsmod**, **modprobe** и **modinfo**.  
На практике выполнено подключение модулей **ext4** и **bluetooth**, исследована их структура, зависимости и параметры.  

